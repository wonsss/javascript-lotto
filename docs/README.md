# 로또 미션 1단계 (마르코 X 무비)

- 데모페이지 : https://wonsss.github.io/javascript-lotto/

## 도식화

![lotto schema](/images/lotto_schema.png)
![lotto schema2](/images/lotto_schema2.png)

## 기능 요구사항

- [x] 로또 구입 금액을 입력하면, 금액에 해당하는 로또를 발급해야 한다.

  - 입력받는 구입 금액은 1,000원 단위로 입력되어야 한다.
  - 입력받는 구입 금액은 1,000원 이상이어야 한다.
  - 사용자가 입력한 금액만큼 로또가 구매된다.
  - [x] 로또 구입 버튼을 한 번 누른 후에는, 버튼이 다시 눌러지지 않도록 비활성화한다(disabled).

- [x] 예외처리 (PurchaseView)
  - [x] 1,000원 미만으로 돈이 입력됐을 때, alert를 띄운다.
  - [x] 1,000원 단위로 입력되지 않았을 때, alert를 띄운다.
  - [x] 1,000,000원 초과한 돈이 입력됐을 때 alert를 띄운다.
- [x] 렌더링 (IssuedTicketView)
  - [x] 로또 구입 버튼을 누르면, 티켓을 볼 수 있는 section을 보여준다.
  - [x] 로또 구입 버튼을 누르면, 구매한 티켓의 수를 보여준다.
  - [x] (toggle off) 로또 구입 버튼을 누르면, 발급된 로또 개수 만큼 티켓을 보여준다.
    - [x] 많은 수의 로또 티켓이 발급된 경우, 티켓이 화면 밖으로 넘어가지 않도록 설정한다(flex-wrap).
  - [x] (toggle on) 토글버튼을 누르면, 각 티켓의 로또 번호를 보여준다.
- 로또 1장의 가격은 1,000원이다.
- [x] 소비자는 자동 구매를 할 수 있어야 한다.
  - 자동발급된 로또의 번호는 중복되어서는 안된다.
  - 발급받은 로또 6개 숫자 모두가 1부터 45 범위 안에 있어야 한다.
  - 발급한 로또는 모두 각각 독립적으로 랜덤한 번호를 추천한다
- [x] 번호 보기 토글 버튼을 클릭해 로또 번호를 볼 수 있어야 한다.
- [x] (추가사항) 입력받는 금액이 1원, 10원, 100원 단위가 들어가도 1000원 이상이면 로또 구매가 가능하도록 한다.
  - [x] 로또 구매 후 남은 잔돈은 input의 value에 표시된다.

## 테스트 요구사항

- [x] 기능 요구사항을 구현하며, 도메인 로직에 대한 단위 테스트를 Jest로 작성한다.
  - [x] 로또 구입 금액을 입력하면, 금액에 해당하는 로또를 발급해야 한다.
    - 입력받는 구입 금액은 1,000원 단위로 입력되어야 한다.
    - 입력받는 구입 금액은 1,000원 이상이어야 한다.
    - 사용자가 입력한 금액만큼 로또가 구매된다.
  - 로또 1장의 가격은 1,000원이다.
  - [x] 소비자는 자동 구매를 할 수 있어야 한다.
    - 자동발급된 로또의 번호는 중복되어서는 안된다.
    - 발급받은 로또 6개 숫자 모두가 1부터 45 범위 안에 있어야 한다.
    - 발급한 로또는 모두 각각 독립적으로 랜덤한 번호를 추천한다

## 리팩토링할 사항

- [x] 모델 캡슐화(private class fields, method)
- [x] CSS
  - [x] CSS 분리하기
  - [x] CSS 변수 사용하기
  - [x] 적용안되고 있는 CSS 제거
  - [x] 마우스 cursor 스타일 적용
- [x] MVC 점검
  - [x] 컨트롤러가 혹시 모델을 직접적으로 수정하는 지 확인
  - [x] 모델의 역할이 정확한지 확인 - 데이터와 데이터를 수정하는 메서드만 가지고 있는지
- [x] eslint 설정 점검
  - [x] 함수 15라인
  - [x] indent depth 1
- [x] 하는 일이 많은 함수 분리하기
  - [x] 함수가 한가지 기능만 하는지 점검
- [x] `innerHTML`을 `insertAdjacentHTML`로 리팩토링 하기
- [x] `for`문 대신 간결한 고차함수로 리팩토링 하기 (`some`, `every` ..)
- [ ] 코드 컨벤션 읽으면서 코드 점검하기
- [x] `utils` 폴더에 있는 파일들의 범용성 확인하기
  - [x] `selector` 함수를 범용성있게 만들기
- [x] `if`문 점검하기 (드모르간 법칙)
- [x] 테스트 코드 전반적으로 리팩토링 하기
- [x] package.json에서 안 쓰는 스크립트 점검
- [x] HTML에다가 넣어둔 Dummy HTML 코드 삭제
- [x] `emit`, `on` 유틸함수를 이용하여 MVC 패턴을 개선
- [x] 변수 이름 점검
- [x] 상수 분리
  - `Object.freeze` 사용

## build 및 deploy 관련

- [x] webpack development mode 확인
- [x] webpack production mode 확인

## MVC 패턴

### Model

- 데이터를 관리한다.
- 데이터를 수정하는 메서드를 가지고 있다.
- 캡슐화되어 있다.
- View와 Controller에 의존하지 않는다.

### View

- 사용자가 보는 화면을 관리한다.
- 데이터를 돔에 출력한다.
- 사용자가 발생한 이벤트를 처리한다.
  - 이벤트 발생을 인지한다. (on)
  - 이벤트 발생을 컨트롤러에게 알린다. (emit, custom event dispatch)
- 데이터를 가지고 있으면 안된다.
- Model과 Controller에 의존하지 않는다.

### Controller

- 서로 분리된 Model과 View를 연결한다.
- View의 이벤트 발생 여부가 전달되면 이벤트에 따라 Model이 데이터를 관리하도록 시킨다.
- Model이 갖고 있는 데이터를 View에게 전달하여 화면에 출력하도록 시킨다.
